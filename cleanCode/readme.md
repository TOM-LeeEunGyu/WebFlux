중복을 피하라, 필요한 기능만 수행해라, 제대로 표현하라, 작게 추상화하라
깨끗한 코드와 나쁜 코드를 구분할 줄 안다고 깨끗한 코드를 작성할 줄 안다는 뜻은 아니다.

간단한 코드

- 모든 테스트를 통과한다
- 중복이 없다.
- 시스템 내 모든 설계 아이디어를 표현한다.
- 클래스, 메서드, 함수 등을 최대한 줄인다.

의미 있는 이름

- 의도를 분명히 밝혀라
- 그릇된 정보를 피하라(accountList -> accountGroup) List같은 특수한 의미 쓰지 마라.
- 의미 있게 구분하라(getActiveAccount,getActiveAccounts 이렇게 선언하지마라)
- 발음하기 쉬운 이름을 사용하라
- 검색하기 쉬운 이름을 사용하라(e는 영어에서 가장 많이 쓰이는 문자이다. 지양해라)
- 인코딩을 피해라.
- 기발한 이름은 피해라
- 한 개념에 한 단어를 사용하라
- 말장난을 하지 마라
- 해법 영역에서 가져온 이름을 사용하라.
- 문제 영역에서 가져온 이름을 사용하라
- 의미 있는 맥락을 추가하라(state -> addrstate)
- 불필요한 맥락을 없애라

함수

- 작게 만들어라
- 한가지만 해라
- 함수당 추상화 수준은 하나로
- 코드를 읽을 때 위에서 아래로 이야기처럼 읽혀야 좋다.
- 서술적인 이름을 사용하라
- 3개 이상의 인수는 가급적 피해라(한두개로 끝내라)
- 플래그 인수는 추하다(boolean 넣지 마라)
- 부수 효과를 일으키지 마라
- 인수를 입력으로 사용하라.(출력x)
- 명령과 조회를 분리하라
- 오류코드보다 예외를 사용하라
- try/catch 사용하지 마라
- 반복하지 마라

주석

- 주석은 나쁜 코드를 보안하지 못한다
- 주석말고 코드로 의도를 표한하라
- 좋은 주석
  1. 법적인 주석
  2. 정보를 제공하는 주석
  3. 의도를 설명하는 주석
  4. 의미를 명료하게 밝히는 주석
  5. 결과를 경고하는 주석
  6. todo 주석
  7. 중요성을 강조하는 주석
- 안좋은 주석
  1. 주절거리는 주석
  2. 같은 이야기를 중복하는 주석
  3. 오해할 여지가 있는 주석
  4. 의무적으로 다는 주석
  5. 이력을 기록하는 주석
  6. 있으나 마나 한 주석
  7. 주석으로 코드 처리하지 마라
  8. 전역 정보 넣지 마라
  9. 너무 많은 정보 넣지 마라
- 함수나 변수로 표현할 수 있다면 주석을 달지 마라
- 위치를 표시하는 주석
- 닫는 괄호에 다는 주석( ex } // try)
- 공로를 돌리거나 저자를 표시하는 주석

형식 맞추기

- 적절한 행 길이를 유지하라
- 신문 기사처럼 작성하라(아래로 내려갈수록 세세하게)
- 개념은 빈 행으로 분리하라
- 세로밀집도(서로 밀접한 코드는 가까이 놓여야 한다)
- 변수는 사용하는 위치에 최대한 가까이 선언한다.
- 인스턴스 변수는 클래스 맨 처음에 선언한다.
- 종속함수, 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치하라, 가능하다면 호출하는 함수를 호출되는 함수보다 먼저 배치하라
- 친화도가 높을수록 코드를 가까이 배치한다
- 행길이는 120자 정도를 권한다.
- 들여쓰기를 해라(무시하고 싶은 유혹이 있어도 해라)

객체와 자료구조

- 객체를 초함하는 자료를 표현할 때 추상적으로 보여줘라
- 절차적인 코드는 새로운 자료구조를 추가하기 어렵다, 그러려면 모든 함수를 고쳐야 한다. 객체 지향 코드는 새로운 함수를 추가하기 어렵다. 그러려면 모든 클래스를 고쳐야 한다.
- 객체는 조회 함수로 내부를 공개하면 안된다
- 객체는 동작을 공개하고 자료를 숨긴다, 기존 동작을 변경하지 않으면서 새 객체 타입을 추가하기는 쉬운 반면, 새 동작을 추가하기는 어렵다.

오류처리

- Try-Catch-Finally 문부터 작성하라
- 미확인 예외를 사용하라
- 예외에 의미를 제공하라(메세지에 정보를 담아 예외와 함께 던져라)
- 호출자를 고려해 예외 클래스를 정의하라
- 정상 흐름을 정의하라
- null을 반환하지 마라(예외를 던지거나 특수 사례 객체를 반환하라)
- null을 전달하지 마라

경계

- 경계 살피고 익히기
- 학습 테스트는 공짜 이상이다
- 아직 존재하지 않는 코드를 사용하라

단위 테스트

- TDD 세가지 법칙
  1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다
  2. 컴파일은 실패하지 않으면서 실해잉 실패하는 정도로만 단위테스트를 작성한다
  3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다
- 테스트 코드는 실제 코드 못지 않게 중요하다.
- 테스트당 개념 하나
- 깨끗한 테스트의 다섯 가지 규칙
  1. 빠르게
  2. 독립적으로
  3. 반복 가능하게
  4. 자가검증하게
  5. 적시에

클래스

- 클래스는 작게
- 단일 책임 원칙: 클래스나 모듕을 변경할 이유가 하나뿐이여야 한다.
- 큰 클래스 몇개보다 작은 클래스 여럿

시스템

- 테스트 주도 시스템 아키텍쳐 구축
- 의사 결정을 최적화하라(때때로 가느ㅇ한 마지막 순간까지 결정을 미루는 방법이 최선이다)
- 명백한 가치가 있을 때 표준을 현명하게 사용하라
- 시스템은 도메인 특화 언어가 필요하다

창발성

- 단순한 설계 규칙 네가지
  1. 모든 테스트를 실행한다
  2. 중복을 없앤다.
  3. 프로그래머 의도를 표현한다
  4. 클래스와 메서드 수를 최소로 줄인다

동시성

- 동시성은 결함을 없애는 전략이다. 즉 '무엇'과 '언제'를 분리하는 전략이다.
- 동시성 방어 원칙
  1. 단일 책임 원칙
  2. 자료 범위를 제한하라
  3. 자료 사본을 사용하라
  4. 스레드는 가능한 독립적으로 구현하라
  5. 라이브러리를 이해하라
  6. 실행 모델을 이해하라
  7. 동기화 하는 메서드 사이에 존재하는 의존성을 이해하라
  8. 동기화 하는 부분을 작게 만들어라
  9. 올바른 종료 코드는 구현하기 어렵다.

점진적인 개선

- 코드는 언제나 깔끔하고 단순하게

냄새와 휴리스틱

- 환경
  1. 여러 단계로 빌드해야 한다.
  2. 여러 단계로 테스트해야 한다.
  3. 여러 단계로 테스트해야 한다.
- 함수
  1. 너무 많은 인수는 좋지 안다.
  2. 플래그인수 안좋다
  3. 죽은함수 지워라
- 일반
  1. 소스파일에 하나의 언어만 사용하라
  2. 당연한 동작을 구현하지 않는다.
  3. 경계를 올바로 처리하지 않는다.
  4. 안전 절차를 무시하지 마라
  5. 중복을 없애라
  6. 추상화 수준이 올바르지 못하다
  7. 기초클래스가 파생클래스에 의존하면 안된다
  8. 과도한 정보는 옳지 못하다.
